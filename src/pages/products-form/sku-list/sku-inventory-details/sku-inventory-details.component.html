<p-dialog
  [(visible)]="inventoryService.isInventoryDialogOpen"
  header="Detalhes do Estoque"
  [modal]="true"
  [style]="{ width: '1200px', 'max-width': '90%' }"
  [dismissableMask]="true"
  (onHide)="inventoryService.closeInventoryDialog()"
  appendTo="body"
>
  <div class="flex flex-col gap-4">
    <h3 class="text-lg font-semibold">{{ inventoryService.sku?.name }}</h3>
    <div class="grid grid-cols-4 gap-2">
      <app-card class="card">
        <label> Código </label>
        {{ inventoryService.sku?.code }}
      </app-card>
      <app-card class="card">
        <label> Quantidade Total </label>
        {{ inventoryService.sku?.quantity }}
      </app-card>
      <app-card class="card">
        <label> Custo </label>
        {{ inventoryService.sku?.cost | currency: 'BRL' }}
      </app-card>
      <app-card class="card">
        <label> Preço </label>
        {{ inventoryService.sku?.price | currency: 'BRL' }}
      </app-card>
    </div>
    <div class="flex flex-col gap-2">
      <h4 class="text-base font-semibold">Estoque</h4>
      @if (inventoryService.isInventoryLoading) {
        <span>Carregando estoque...</span>
      } @else {
        <app-table
          [columns]="inventoryColumns"
          [value]="inventoryService.inventories"
          [showToolbar]="false"
          [showAdd]="false"
          [showEdit]="false"
          [showDelete]="false"
          [keepState]="false"
        ></app-table>
      }
    </div>

    <div class="flex flex-col gap-2 mt-4">
      <h4 class="text-base font-semibold">Histórico de Movimentações</h4>
      @if (inventoryService.isTransactionsLoading) {
        <span>Carregando histórico de movimentações...</span>
      } @else {
        <app-table
          [columns]="transactionColumns"
          [value]="inventoryService.transactions"
          [showToolbar]="false"
          [showAdd]="false"
          [showEdit]="false"
          [showDelete]="false"
          [keepState]="false"
        ></app-table>
      }
    </div>
  </div>
</p-dialog>
